'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.pagination=undefined;var _getPrototypeOf=require('babel-runtime/core-js/object/get-prototype-of');var _getPrototypeOf2=_interopRequireDefault(_getPrototypeOf);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require('babel-runtime/helpers/possibleConstructorReturn');var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require('babel-runtime/helpers/inherits');var _inherits3=_interopRequireDefault(_inherits2);var _react=require('react');var _react2=_interopRequireDefault(_react);var _propTypes=require('prop-types');var _propTypes2=_interopRequireDefault(_propTypes);var _reactRouter=require('react-router');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var toInteger=function toInteger(v){return isNaN(v)?0:parseInt(v,10);};/**
 * Pagination component
 */function currentPageClassName(pageNumber,currentPageNumber){if(pageNumber===currentPageNumber)return'currentPage';}var pageKey=function pageKey(pageNumber){return'pagination-'+pageNumber;};var pageLinkPath=function pageLinkPath(path,currentPageNumber){return path+'/'+currentPageNumber;};function calculateTotalPages(totalItemsInCollection,itemsPerPage){var e=toInteger(totalItemsInCollection);var p=toInteger(itemsPerPage);var r=!!(e%p);var l=Math.floor(e/p);return r?l+1:l;}function calculatePageNumber(pageNumber,totalPages){var p=toInteger(pageNumber);var t=toInteger(totalPages);return Math.max(1,Math.min(p,t));}var pagination={calculateTotalPages:calculateTotalPages,calculatePageNumber:calculatePageNumber};exports.pagination=pagination;var Pagination=function(_React$Component){(0,_inherits3.default)(Pagination,_React$Component);function Pagination(){var _ref;var _temp,_this,_ret;(0,_classCallCheck3.default)(this,Pagination);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=(0,_possibleConstructorReturn3.default)(this,(_ref=Pagination.__proto__||(0,_getPrototypeOf2.default)(Pagination)).call.apply(_ref,[this].concat(args))),_this),_this.x=function(){return 0;},_this.y=function(){return 0;},_this.z=function(){return 0;},_this.zeroIndex=function(){return 0;},_this.lastIndex=function(){return 0;},_this.hasReversePageLink=function(pageNumber,totalPages){return _this.zeroIndex(pageNumber,totalPages)-1>0;},_this.hasForwardPageLink=function(pageNumber,totalPages){return _this.lastIndex(pageNumber,totalPages)+1<totalPages;},_this.hasZeroPageLink=function(pageNumber,totalPages){return _this.zeroIndex(pageNumber,totalPages)>0;},_this.hasLastPageLink=function(pageNumber,totalPages){return _this.lastIndex(pageNumber,totalPages)<totalPages;},_this.reversePageLinkItem=function(path,pageNumber,totalPages){if(_this.hasReversePageLink(pageNumber,totalPages)){var n=_this.zeroIndex(pageNumber,totalPages);return _react2.default.createElement('li',{key:pageKey('reverse'),className:'reversePage'},_react2.default.createElement(_reactRouter.Link,{to:pageLinkPath(path,n),onClick:function onClick(){return _this.handleClick(n);}},_react2.default.createElement('span',{className:'reverse'},'\xAB')));}return null;},_this.forwardPageLinkItem=function(path,pageNumber,totalPages){if(_this.hasForwardPageLink(pageNumber,totalPages)){var n=_this.lastIndex(pageNumber,totalPages)+1;return _react2.default.createElement('li',{key:pageKey('forward'),className:'forwardPage'},_react2.default.createElement(_reactRouter.Link,{to:pageLinkPath(path,n),onClick:function onClick(){return _this.handleClick(n);}},_react2.default.createElement('span',{className:'forwardPage'},'\xBB')));}return null;},_this.zeroPageLinkItem=function(path,pageNumber,totalPages){if(_this.hasZeroPageLink(pageNumber,totalPages)){var n=1;return _react2.default.createElement('li',{key:pageKey(n),className:'zeroPage'},_react2.default.createElement(_reactRouter.Link,{to:pageLinkPath(path,n),onClick:function onClick(){return _this.handleClick(n);}},_react2.default.createElement('span',{className:'pageNumber'},n)));}return null;},_this.lastPageLinkItem=function(path,pageNumber,totalPages){if(_this.hasLastPageLink(pageNumber,totalPages)){var n=totalPages;return _react2.default.createElement('li',{key:pageKey(n),className:'lastPage'},_react2.default.createElement(_reactRouter.Link,{to:pageLinkPath(path,n),onClick:function onClick(){return _this.handleClick(n);}},_react2.default.createElement('span',{className:'pageNumber'},n)));}return null;},_this.pageLinkItems=function(path,pageNumber,totalPages){var i=_this.zeroIndex(pageNumber,totalPages);var j=_this.lastIndex(pageNumber,totalPages);var a=[];var _loop=function _loop(){var n=i+1;a.push(_react2.default.createElement('li',{key:pageKey(n),className:currentPageClassName(pageNumber,n)},_react2.default.createElement(_reactRouter.Link,{to:pageLinkPath(path,n),onClick:function onClick(){return _this.handleClick(n);}},_react2.default.createElement('span',{className:'pageNumber'},n))));};for(i,j;i<j;i=i+1){_loop();}return a;},_this.handleClick=function(pageNumber){return _this.props.onClick(pageNumber);},_temp),(0,_possibleConstructorReturn3.default)(_this,_ret);}(0,_createClass3.default)(Pagination,[{key:'shouldComponentUpdate',value:function shouldComponentUpdate(props){return props.pageNumber!==this.props.pageNumber||props.totalPages!==this.props.totalPages||props.path!==this.props.path;}},{key:'render',value:function render(){var totalPages=toInteger(this.props.totalPages);if(totalPages>1){var path=this.props.path;var pageNumber=calculatePageNumber(this.props.pageNumber,totalPages);if(totalPages>this.z()){return _react2.default.createElement('ul',{className:'pagination'},this.zeroPageLinkItem(path,pageNumber,totalPages),this.reversePageLinkItem(path,pageNumber,totalPages),this.pageLinkItems(path,pageNumber,totalPages),this.forwardPageLinkItem(path,pageNumber,totalPages),this.lastPageLinkItem(path,pageNumber,totalPages));}else{return _react2.default.createElement('ul',{className:'pagination'},this.pageLinkItems(path,pageNumber,totalPages));}}return null;}}]);return Pagination;}(_react2.default.Component);exports.default=Pagination;Pagination.propTypes={onClick:_propTypes2.default.func.isRequired,pageNumber:_propTypes2.default.number.isRequired,path:_propTypes2.default.string.isRequired,totalPages:_propTypes2.default.number.isRequired};Pagination.defaultProps={onClick:function onClick(){},/* no op */pageNumber:0,path:'',totalPages:0};