'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.toInteger=undefined;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();exports.calculateTotalPages=calculateTotalPages;exports.calculatePageNumber=calculatePageNumber;var _react=require('react');var _react2=_interopRequireDefault(_react);var _propTypes=require('prop-types');var _propTypes2=_interopRequireDefault(_propTypes);var _reactRouter=require('react-router');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}/**
 * Pagination component
 */var toInteger=exports.toInteger=function toInteger(v){return isNaN(v)?0:parseInt(v,10);};function currentPageClassName(pageNumber,currentPageNumber){if(pageNumber===currentPageNumber)return'currentPage';}var pageKey=function pageKey(currentPageKey){return'pagination-'+currentPageKey;};var pageLinkPath=function pageLinkPath(path,currentPageNumber){return path+'/'+currentPageNumber;};function calculateTotalPages(totalItemsInCollection,itemsPerPage){var e=toInteger(totalItemsInCollection);var p=toInteger(itemsPerPage);var r=!!(e%p);var l=Math.floor(e/p);return r?l+1:l;}function calculatePageNumber(pageNumber,totalPages){var p=toInteger(pageNumber);var t=toInteger(totalPages);return Math.max(1,Math.min(p,t));}var Pagination=function(_Component){_inherits(Pagination,_Component);function Pagination(){var _ref;var _temp,_this,_ret;_classCallCheck(this,Pagination);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=Pagination.__proto__||Object.getPrototypeOf(Pagination)).call.apply(_ref,[this].concat(args))),_this),_this.state={pageNumber:toInteger(_this.props.pageNumber),totalPages:toInteger(_this.props.totalPages)},_this.handleClick=function(pageNumber){return _this.props.onClick(pageNumber);},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(Pagination,[{key:'x',value:function x(){return 0;}},{key:'y',value:function y(){return 0;}},{key:'z',value:function z(){return 0;}},{key:'zeroIndex',value:function zeroIndex(){return 0;}},{key:'lastIndex',value:function lastIndex(){return 0;}},{key:'hasReversePageLink',value:function hasReversePageLink(pageNumber,totalPages){return this.zeroIndex(pageNumber,totalPages)-1>0;}},{key:'hasForwardPageLink',value:function hasForwardPageLink(pageNumber,totalPages){return this.lastIndex(pageNumber,totalPages)+1<totalPages;}},{key:'hasZeroPageLink',value:function hasZeroPageLink(pageNumber,totalPages){return this.zeroIndex(pageNumber,totalPages)>0;}},{key:'hasLastPageLink',value:function hasLastPageLink(pageNumber,totalPages){return this.lastIndex(pageNumber,totalPages)<totalPages;}},{key:'reversePageLinkItem',value:function reversePageLinkItem(path,pageNumber,totalPages){var _this2=this;if(this.hasReversePageLink(pageNumber,totalPages)){var n=this.zeroIndex(pageNumber,totalPages);return _react2.default.createElement('li',{key:pageKey('reverse'),className:'reversePage'},_react2.default.createElement(_reactRouter.Link,{to:pageLinkPath(path,n),onClick:function onClick(){return _this2.handleClick(n);}},_react2.default.createElement('span',{className:'reverse'},'\xAB')));}return null;}},{key:'forwardPageLinkItem',value:function forwardPageLinkItem(path,pageNumber,totalPages){var _this3=this;if(this.hasForwardPageLink(pageNumber,totalPages)){var n=this.lastIndex(pageNumber,totalPages)+1;return _react2.default.createElement('li',{key:pageKey('forward'),className:'forwardPage'},_react2.default.createElement(_reactRouter.Link,{to:pageLinkPath(path,n),onClick:function onClick(){return _this3.handleClick(n);}},_react2.default.createElement('span',{className:'forwardPage'},'\xBB')));}return null;}},{key:'zeroPageLinkItem',value:function zeroPageLinkItem(path,pageNumber,totalPages){var _this4=this;if(this.hasZeroPageLink(pageNumber,totalPages)){var n=1;return _react2.default.createElement('li',{key:pageKey(n),className:'zeroPage'},_react2.default.createElement(_reactRouter.Link,{to:pageLinkPath(path,n),onClick:function onClick(){return _this4.handleClick(n);}},_react2.default.createElement('span',{className:'pageNumber'},n)));}return null;}},{key:'lastPageLinkItem',value:function lastPageLinkItem(path,pageNumber,totalPages){var _this5=this;if(this.hasLastPageLink(pageNumber,totalPages)){var n=totalPages;return _react2.default.createElement('li',{key:pageKey(n),className:'lastPage'},_react2.default.createElement(_reactRouter.Link,{to:pageLinkPath(path,n),onClick:function onClick(){return _this5.handleClick(n);}},_react2.default.createElement('span',{className:'pageNumber'},n)));}return null;}},{key:'pageLinkItems',value:function pageLinkItems(path,pageNumber,totalPages){var _this6=this;var i=this.zeroIndex(pageNumber,totalPages);var j=this.lastIndex(pageNumber,totalPages);var a=[];var _loop=function _loop(){var n=i+1;a.push(_react2.default.createElement('li',{key:pageKey(n),className:currentPageClassName(pageNumber,n)},_react2.default.createElement(_reactRouter.Link,{to:pageLinkPath(path,n),onClick:function onClick(){return _this6.handleClick(n);}},_react2.default.createElement('span',{className:'pageNumber'},n))));};for(i,j;i<j;i=i+1){_loop();}return a;}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(_ref2){var pageNumber=_ref2.pageNumber,totalPages=_ref2.totalPages;this.setState({pageNumber:toInteger(pageNumber),totalPages:toInteger(totalPages)});}},{key:'shouldComponentUpdate',value:function shouldComponentUpdate(props){return props.pageNumber!==this.props.pageNumber||props.totalPages!==this.props.totalPages||props.path!==this.props.path;}},{key:'render',value:function render(){var totalPages=this.state.totalPages;if(totalPages>1){var path=this.props.path;var pageNumber=this.state.pageNumber;var page=calculatePageNumber(pageNumber,totalPages);if(totalPages>this.z()){return _react2.default.createElement('ul',{className:'pagination'},this.zeroPageLinkItem(path,page,totalPages),this.reversePageLinkItem(path,page,totalPages),this.pageLinkItems(path,page,totalPages),this.forwardPageLinkItem(path,page,totalPages),this.lastPageLinkItem(path,page,totalPages));}else{return _react2.default.createElement('ul',{className:'pagination'},this.pageLinkItems(path,page,totalPages));}}return null;}}]);return Pagination;}(_react.Component);Pagination.calculateTotalPages=calculateTotalPages;Pagination.calculatePageNumber=calculatePageNumber;exports.default=Pagination;Pagination.propTypes={onClick:_propTypes2.default.func,pageNumber:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]).isRequired,path:_propTypes2.default.string,totalPages:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.number]).isRequired};Pagination.defaultProps={onClick:function onClick(){},pageNumber:0,path:'',totalPages:0};